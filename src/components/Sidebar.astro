---
import '../styles/global.css';
const { title, sections } = Astro.props;
const posts = import.meta.glob('../pages/posts/*.md', { eager: true });

// To array
const postList = Object.entries(posts).map(([path, post]: [string, any]) => {
  const slug = path
    .replace('../pages/posts/', '')
    .replace(/\.md$/, '');

  return {
    slug, 
    ...post.frontmatter,
  };
}).filter((post) => post.show);

postList.sort((a, b) => a.order - b.order);

const currentPath = Astro.url.pathname;
---
<div class="h-screen w-64 bg-gray-800 text-white fixed top-0 left-0 flex flex-col">
    <nav class="flex-1 overflow-y-auto">
	<ul class="space-y-2 p-4" style={"padding-left: 1rem; padding-top: 2rem;"} >
		{postList.map(post => { 
		const isActive = `/posts/${post.slug}` === currentPath;
		return (
		  <li class={"text-xl " + (isActive ? 'active' : '')}>
		      <a href={`/posts/${post.slug}`}>{post.title}</a>
		  </li>
		)})}
      </ul>
    </nav>
    <div class="p-4 border-t border-gray-700">
      <a href="/" class="block text-sm text-gray-400 hover:text-white">
        Back to Home
      </a>
    </div>
</div>

<style>
.active {
  font-weight: bold;
  text-decoration: underline;
}
</style>
